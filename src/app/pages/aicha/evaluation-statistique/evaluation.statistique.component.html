<p-toast [style]="{marginTop: '80px'}" position="top-right"></p-toast>

<p-panel>
  <p-header>
    <div class="ui-helper-clearfix">
      <span class="ui-panel-title" style="font-size:16px;display:inline-block;margin-top:2px">Statistiques par evaluation</span>
      <button class="btn btn-sm btn-outline-primary" type="button" style="float: right;" (click)="initData(this.structureId)">
        <em class="fa fa-refresh"></em> Actualiser
      </button>
    </div>
  </p-header>


  <div>
    <p-fieldset legend="FITRES STATISTIQUES">
      <table>
        <tr>
          <td style="width: 20%">
            <mat-form-field appearance="fill">
              <mat-label>Année scolaire</mat-label>
              <mat-select (selectionChange)="setAnnee($event.value)" placeholder="Selectionnez une année" [(ngModel)]="anneeScolaire">
<!--                <mat-option *ngFor="let d of anneeScolaires; index as i;" [value]="d">{{d}}</mat-option>-->
                <mat-option value="{{annees.anneeScolaire}}" *ngFor="let annees of anneeScolaires">{{annees.anneeScolaire}}</mat-option>
              </mat-select>
            </mat-form-field>
          </td>
          <td style="width: 25%">
            <mat-form-field appearance="fill">
              <mat-label>Unite d'enseignement</mat-label>
              <mat-select (selectionChange)="setUE($event.value)" placeholder="Une UE" [(ngModel)]="ueSelected">
                <mat-option *ngFor="let ue of ues; index as i;" [value]="ue">{{ue.nomUE}} ({{ue.codeUE}})</mat-option>
              </mat-select>
            </mat-form-field>
          </td>

          <td style="width: 25%">
            <mat-form-field appearance="fill">
              <mat-label>Element constitutif</mat-label>
              <mat-select (selectionChange)="setEC($event.value)" placeholder="Un element constituf" [(ngModel)]="ecSelected">
                <mat-option *ngFor="let ec of ecs; index as i;" [value]="ec">{{ec.nomEC}} ({{ec.codeEC}})</mat-option>
              </mat-select>
            </mat-form-field>
          </td>

          <td style="width: 25%">
            <mat-form-field appearance="fill">
              <mat-label>Evaluations</mat-label>
              <mat-select (selectionChange)="setEvaluation($event.value)" placeholder="Une evaluation" [(ngModel)]="evaluationSelected">
                <mat-option *ngFor="let evaluation of evaluations; index as i;" [value]="evaluation">{{evaluation.numEvaluation}} ({{evaluation.type}})</mat-option>
              </mat-select>
            </mat-form-field>
          </td>

          <td style="width: 5%;padding-left: 2px;">
            <mat-checkbox class="example-margin" value="true" [(ngModel)]="genre" (change)="setGenre($event.checked)">Genre</mat-checkbox>
          </td>
        </tr>
      </table>
    </p-fieldset>

    <p-fieldset legend="Statistiques de l'evaluation par année : {{anneeScolaire}}">
      <table>
        <tr>
          <td>
            <p-chart type="pie" [data]="pieData"></p-chart>
          </td>
          <td>
            <p-chart type="doughnut" [data]="doughnutData"></p-chart>
          </td>
        </tr>
      </table>
    </p-fieldset>

    <p-fieldset legend="Statistiques de l'evaluation par mois">
      <p-chart type="bar" [data]="barreData"></p-chart>
    </p-fieldset>

<!--    <p-fieldset legend="Statistiques de l'evaluation par mois">-->
<!--      <p-chart type="line" [data]="lineData"></p-chart>-->
<!--    </p-fieldset>-->

  </div>



</p-panel>
